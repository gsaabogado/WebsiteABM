<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.237">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Severin Reissl and Luis Sarmiento">

<title>The Agent-Based Model of Technology Adoption (ABM-REN) - Model Overview</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">The Agent-Based Model of Technology Adoption (ABM-REN)</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./01_about.html" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/gsaabogado"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/gsaabogado"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://luissarmiento.net/">
 <span class="menu-text">Personal Site</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Model Overview</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Sections</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_about.html" class="sidebar-item-text sidebar-link">About</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_data.html" class="sidebar-item-text sidebar-link">Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_model.html" class="sidebar-item-text sidebar-link active">Model Overview</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_code.html" class="sidebar-item-text sidebar-link">Model Code</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_modelresults.html" class="sidebar-item-text sidebar-link">Model Results</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#model-description" id="toc-model-description" class="nav-link" data-scroll-target="#model-description">Model description</a>
  <ul class="collapse">
  <li><a href="#electricity-price" id="toc-electricity-price" class="nav-link" data-scroll-target="#electricity-price">Electricity price</a></li>
  <li><a href="#income-and-electricity-costs" id="toc-income-and-electricity-costs" class="nav-link" data-scroll-target="#income-and-electricity-costs">Income and electricity costs</a></li>
  <li><a href="#consumption" id="toc-consumption" class="nav-link" data-scroll-target="#consumption">Consumption</a></li>
  <li><a href="#updating-panel-age" id="toc-updating-panel-age" class="nav-link" data-scroll-target="#updating-panel-age">Updating panel age</a></li>
  <li><a href="#electricity-price-expectations" id="toc-electricity-price-expectations" class="nav-link" data-scroll-target="#electricity-price-expectations">Electricity price expectations</a></li>
  <li><a href="#adoption-decision" id="toc-adoption-decision" class="nav-link" data-scroll-target="#adoption-decision">Adoption Decision</a></li>
  <li><a href="#policy" id="toc-policy" class="nav-link" data-scroll-target="#policy">Policy</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Model Overview</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Severin Reissl and Luis Sarmiento </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="background" class="level1">
<h1>Background</h1>
<p>Before providing a detailed outline of the model (see below), we briefly describe the basic intuition underlying the agent-based model we use to simulate the household decision to adopt a technology. At present, the model only depicts the adoption of photovoltaic (PV) systems, but a similar framework could also be applied to other technologies such as heat pumps, insulation, or AC systems.</p>
<p>The adoption decision in the model is based on a simple expected utility framework; in every period <span class="math inline">\(t = 1,...,T\)</span> (where one period represents one year), each household <span class="math inline">\(h = 1,...,N\)</span> who does not already own PV faces the binary decision whether or not to purchase the single type of PV system available in the model. The expected utility from owning PV is a function of the (discounted) profit <span class="math inline">\(h\)</span> expects to derive from the ownership of PV over the lifetime of the panel, as well as a component based on social influence/emulation and one based on the environmental attitude of <span class="math inline">\(h\)</span>. The expected profit from owning PV (stemming from an expected reduction in outlays for electricity and earnings through electricity fed into the grid) is in turn a function of the future electricity price expected by <span class="math inline">\(h\)</span> as well as the feed-in tariff and the future electricity consumption of <span class="math inline">\(h\)</span>.</p>
<p>Households receive income, consume and pay electricity cost, resulting in changes in their stocks of liquid assets; these liquid assets can be used to purchase a solar panel. Households with insufficient liquid assets may also request a loan to install PV from a stylised banking sector, but may be credit-rationed if the bank is unwilling to lend them as much as they require.</p>
</section>
<section id="model-description" class="level1">
<h1>Model description</h1>
<p>The <strong>sequence of events</strong> taking place in every simulation period only consists of a few steps:</p>
<div class="incremental">
<ul class="incremental">
<li>Set current electricity price</li>
<li>Determine income and electricity cost for each household; calculate revenue/cost saving for PV owners</li>
<li>Update income distribution statistics</li>
<li>Based on new income distribution determine consumption expenditure. Calculate saving, apply debt service for each household with positive debt and update liquidity</li>
<li>Augment the age of existing solar panels; scrap those which exceed the maximum lifespan</li>
<li>Update households’ expectations of future electricity price</li>
<li>Adoption decision; update state variables of agents who adopt PV</li>
</ul>
</div>
<section id="electricity-price" class="level2">
<h2 class="anchored" data-anchor-id="electricity-price">Electricity price</h2>
<p>Depending on the year which a given simulation period <span class="math inline">\(t\)</span> is supposed to represent (past or future), the current electricity price to be paid by households in period <span class="math inline">\(t\)</span><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> is either taken from a time-series of household-level electricity prices for Germany obtained from Eurostat, or simulated using an AR(1) model previously estimated on this empirical time-series. To estimate this AR(1) model, the time-series was differenced and then used to estimate the intercept (<span class="math inline">\(\phi_1\)</span>) and autoregressive (<span class="math inline">\(\phi_2\)</span>) parameter, with the residuals used to calculate the standard deviation of random shocks (<span class="math inline">\(\sigma^p\)</span>).</p>
<p>If no empirical observation is available for the electricity price in <span class="math inline">\(t\)</span> (because <span class="math inline">\(t\)</span> represents some year in the future), the electricity price in the model in <span class="math inline">\(t\)</span> is given by:</p>
<p><span class="math display">\[
    p_t=p_{t-1}+\phi_1+\phi_2 \Delta p_{t-1}+\epsilon^p_t \rightarrow \epsilon^p_t\sim\mathcal{N}(0,\sigma^p)
\]</span></p>
</section>
<section id="income-and-electricity-costs" class="level2">
<h2 class="anchored" data-anchor-id="income-and-electricity-costs">Income and electricity costs</h2>
<p>In every simulation period, we simulate the income of household <span class="math inline">\(h=1,...,N\)</span> using a draw from the normally distributed variable <span class="math inline">\(Y^h_t\)</span> with mean <span class="math inline">\(\overline{Y^h_t}\)</span> and standard deviation <span class="math inline">\(\widehat{Y^h_t}\)</span>.</p>
<p><span class="math display">\[
    Y^h_t\sim \mathcal{N}\left(\overline{Y^h_t},\widehat{Y^h_t}\right)
\]</span></p>
<p>The mean, <span class="math inline">\(\overline{Y^h_t}\)</span>, is initialised using the income of <span class="math inline">\(h\)</span> according to the SOEP data and grows at rate <span class="math inline">\(g^h\)</span> in every period thereafter, i.e.&nbsp;<span class="math inline">\(\overline{Y^h_t}=(1+g^h)\overline{Y^h_{t-1}}\)</span>. <span class="math inline">\(\widehat{Y^h_t}\)</span> is given by <span class="math inline">\(\overline{Y^h_t}\cdot\sigma^y_d\)</span> where <span class="math inline">\(\sigma^y_d\)</span> is the standard deviation of income within the income decile <span class="math inline">\(d\)</span> of household <span class="math inline">\(h\)</span> in the SOEP data (expressed as % of average income in that decile)</p>
<p>The electricity consumption of each household (in kWh) is instead a deterministic variable, denoted <span class="math inline">\(\overline{E^h_t}\)</span>. As with income, <span class="math inline">\(\overline{E^h_t}\)</span> is initialised using the electricity consumption of <span class="math inline">\(h\)</span> taken from SOEP data (deflated by the empirical electricity price for the start year from the Eurostat dataset) and grows at rate <span class="math inline">\(g^h\)</span> in every period thereafter, i.e.&nbsp;<span class="math inline">\(\overline{E^h_t}=(1+g^h)\overline{E^h_{t-1}}\)</span>.</p>
<p>The cost of electricity to be paid by <span class="math inline">\(h\)</span> would then be <span class="math inline">\(CE^h_t=p_t \overline{E^h_t}\)</span>. If <span class="math inline">\(h\)</span> owns a solar panel (<span class="math inline">\(PV^h_t=1\)</span>), however, this electricity cost will be reduced by the cost saving/revenue generated by the panel. The overall cost saving/revenue derived from a solar panel depends on two factors:</p>
<div class="incremental">
<ul class="incremental">
<li>Whether the current electricity consumption of <span class="math inline">\(h\)</span>, <span class="math inline">\(\overline{E^h_t}\)</span>, is larger or smaller than the amount of electricity <span class="math inline">\(G\)</span> which a solar panel can produce per period.</li>
<li>Whether the feed-in tariff, <span class="math inline">\(FIT^h_t\)</span> that <span class="math inline">\(h\)</span> receives by selling the electricity that their panel produces is larger or smaller than the current price of electricity, <span class="math inline">\(p_t\)</span>.</li>
</ul>
</div>
<p>Since we assume that there is only one model of solar panel which agents can purchase and since we abstract from any variations in electricity output across agents due e.g.&nbsp;to hours of sun, position of the panel, etc., <span class="math inline">\(G\)</span> is fixed, exogenous, and identical for all agents who own PV. <span class="math inline">\(FIT^h_t\)</span> varies across agents; in particular, as is the case in reality in Germany, <span class="math inline">\(FIT^h_t\)</span> depends on the year in which the solar panel was installed. For instance, if <span class="math inline">\(h\)</span> bought a solar panel in 2015, they will receive the 2015 feed-in tariff (taken from empirical data for Germany) for the next 20 years (regardless of what happens to the electricity price), as is the case in reality. For simplicity, we assume that the lifespan of a panel is also 20 years (which is a broadly realistic value based on information material available online). The second condition above is important particularly because in the 2000s, the feed-in tariff in Germany for small PV units (up to 10kWp) was in fact <em>higher</em> than the average electricity price. When simulating past years, actual feed-in tariffs in force in the respective years are used. When simulating future years, the feed-in tariff is kept constant at its most recent value in the baseline simulation.</p>
<p>If <span class="math inline">\(FIT^h_t&gt;p_t\)</span>, it is rational for the household to sell all electricity generated by the panel to the grid and buy any electricity needed back at the lower price; its electricity cost hence becomes</p>
<p><span class="math display">\[
    CE^h_t=p_t \overline{E^h_t}-FIT^h_tG
\]</span> Note that this quantity may also be negative.</p>
<p>If <span class="math inline">\(FIT^h_t&lt;p_t\)</span>, the household would want to consume some or even all of the electricity generated by the panel. Since we are assuming that PV systems in the model are not equipped with batteries, however, agents can only consume a maximum of <span class="math inline">\(\eta G\)</span> of the electricity generated by the panel, where <span class="math inline">\(\eta\)</span> is calibrated to the average share of own consumption out of electricity generated by household PV systems without a battery (information on this value was taken from consumer advice websites). Consequently, the electricity costs for households who own PV and for whom <span class="math inline">\(FIT^h_t&lt;p_t\)</span> is given by</p>
<p><span class="math display">\[
  CE^h_t=p_t \overline{E^h_t}-G\eta p_t-G(1-\eta)FIT^h_t
\]</span> for households for whom <span class="math inline">\(\overline{E^h_t}\geq G\)</span> and by</p>
<p><span class="math display">\[
CE^h_t=p_t \overline{E^h_t}-min\left(\eta G,\overline{E^h_t}\right)p_t-FIT^h_t\left(G-min\left(\eta G,\overline{E^h_t}\right)\right)
\]</span> for households for whom <span class="math inline">\(\overline{E^h_t}&lt; G\)</span>.</p>
<p>Households who own PV keep track of the cumulative profit they have derived from their panel. In order to do so, the variable <span class="math inline">\(\Pi^h\)</span> is updated in every period by adding the respective current saving on electricity cost/revenue from selling to the grid.</p>
<p>In addition to ``gross” income defined above, we also keep track of income net of electricity cost:</p>
<p><span class="math display">\[
    Y^{p,h}_t=min\left(0,Y^h_t-CE^h_t\right)
\]</span></p>
<p>We then calculate income distribution statistics (percentiles and deciles, used below) for period <span class="math inline">\(t\)</span> using this income net of electricity cost.</p>
</section>
<section id="consumption" class="level2">
<h2 class="anchored" data-anchor-id="consumption">Consumption</h2>
<p>Each household devotes a part of its ``gross” income to consumption expenditures (excluding electricity consumption which is determined as described above). The average propensity to consume of <span class="math inline">\(h\)</span>, <span class="math inline">\(c^h_t\)</span>, is determined using survey data from the German Federal Statistical Office, which gives household consumption expenditure by income group, converted into percentiles using SOEP data. <span class="math inline">\(c^h_t\)</span> is hence the average propensity to consume of the income percentile in which <span class="math inline">\(h\)</span> finds itself in period <span class="math inline">\(t\)</span>. The desired consumption expenditure of <span class="math inline">\(h\)</span> is then given by</p>
<p><span class="math display">\[
    C^h_t=(1-\mu)C^h_{t-1}+\mu c^h_t Y^{p,h}_t
\]</span></p>
<p>where <span class="math inline">\(\mu\)</span> is a parameter giving the speed at which consumption expenditure adjusts to changes in income. In the initial period, we set <span class="math inline">\(C^h_t=c^h_t Y^{p,h}_t\)</span>.</p>
<p>Each household in the model holds a stock of liquid assets (money) which is augmented by income and can be used to consume, pay for electricity, service debt and purchase a solar panel. To update the liquidity of <span class="math inline">\(h\)</span>, we first calculate the difference between income on the one hand and desired consumption expenditure and electricity cost on the other:</p>
<p><span class="math display">\[
    Save^h_t=Y^h_t-C^h_t-CE^h_t
\]</span></p>
<p>Recall that if <span class="math inline">\(PV^h_t=1\)</span>, <span class="math inline">\(CE^h_t\)</span> may be negative.</p>
<p>In the first instance, <span class="math inline">\(Save^h_t\)</span> is added to existing liquidity. Note that we assume that households cannot hold negative liquidity; if saving is negative and larger than previously accumulated liquidity, liquidity is set to 0 (implicitly assuming that the household reduces desired consumption expenditure and/or expenditure on electricity in order to be able to afford the payments):</p>
<p><span class="math display">\[
    M^h_t=max\left(0,M^h_{t-1}+Save^h_t\right)
\]</span></p>
<p>In the model, households may incur debt in order to purchase a solar panel. At the beginning of the simulation, the debt of all households (including those already owning PV) is initialised to 0. In any period <span class="math inline">\(t&gt;0\)</span>, households which in the past used a loan in order to buy PV and have not yet fully paid it off must make a debt service payment consisting of interest and principal payments, denoted by <span class="math inline">\(S^h\)</span>. <span class="math inline">\(S^h\)</span> is determined when a household takes out a loan in order to adopt PV. Its calculation is explained in the description of the adoption decision below.</p>
<p>Payments for debt service are made out of the stock of liquidity updated above:</p>
<p><span class="math display">\[
    M^h_t=max\left(0,M^h_t-S^h_t\right)
\]</span></p>
<p>Note that here, too, we assume that payments cannot lead to negative liquidity! If a household is unable to (fully) make its debt service payment out of liquidity, it pays as much as it can, making first the interest payment and then the principal payment. Unpaid principal payments mean that the stock of debt does not decrease as much as it would if the payment were made in full. Any unpaid <em>interest</em> payments are <em>added</em> to the household’s outstanding debt. In both of these cases, <span class="math inline">\(S^h\)</span>, i.e.&nbsp;the per-period debt service to be paid in the future is re-calculated taking into account unpaid principal and/or interest payments and the remaining term of the loan. In addition, any interest paid is subtracted from the cumulative profit derived from owning PV, <span class="math inline">\(\Pi^h\)</span> as it represents a cost.</p>
<p>In a final step, we include a saving allocation choice. This is done to make sure that average household liquidity does not grow too fast. In particular we assume that</p>
<p><span class="math display">\[
    M^h_t=M^h_{t-1}+\theta^h_t(M^h_t-M^h_{t-1}) \quad if\ M^h_t&gt;M^h_{t-1}
\]</span></p>
<p>i.e.&nbsp;we assume that if the household has positive saving, it puts only part of this into liquid assets (bank deposits etc.). <span class="math inline">\(\theta^h_t\)</span> is set using Bundesbank data from which we calculate the share of liquid assets in median gross wealth by income group, such that <span class="math inline">\(\theta^h_t\)</span> is the corresponding share for the income percentile in which <span class="math inline">\(h\)</span> finds itself in period <span class="math inline">\(t\)</span>.</p>
<p>The initial value for liquidity is also set using these `liquidity shares’, alongside gross wealth data from SOEP.</p>
</section>
<section id="updating-panel-age" class="level2">
<h2 class="anchored" data-anchor-id="updating-panel-age">Updating panel age</h2>
<p>The model assumes that all solar panels have the same maximum lifespan, and the age of each panel in the model is augmented by 1 in each period. The age of panels already existing at the beginning of the simulation is taken from SOEP data. If a panel owned by a household <span class="math inline">\(h\)</span> reaches the maximum lifespan in <span class="math inline">\(t\)</span>, the panel is scrapped and the state variable <span class="math inline">\(PV^h_t\)</span> is set to 0. In addition, the feed-in tariff received by <span class="math inline">\(h\)</span>, <span class="math inline">\(FIT^h_t\)</span> is set to 0. The household can then (see below) decide whether they wish to buy a new panel.</p>
</section>
<section id="electricity-price-expectations" class="level2">
<h2 class="anchored" data-anchor-id="electricity-price-expectations">Electricity price expectations</h2>
<p>In order to form an expectation about whether purchasing a solar panel is a profitable undertaking, households must have an expectation of the future electricity price over the lifespan of the panel. In line with a large literature on alternatives to the rational expectations hypothesis, it is assumed that each household uses <em>recursive least squares learning</em> in order to estimate an econometric model of the electricity price using past observations, which is then projected forward to generate a time-series of expected future electricity prices.</p>
<p>In particular, we assume that agents know that changes in the electricity price follow an AR(1) model, but they do not know the parameters of this model. They attempt to learn them using the recursive least squares formula with constant gain:</p>
<p><span class="math display">\[
R^h_t =R^h_{t-1}+\gamma^h\left(x_t x_t'-R^h_{t-1}\right)\\
n^h_t =n^h_{t-1}+\gamma^h\left(R^h_t\right)^{-1}x_t(y_t-x_t' n^h_{t-1})
\]</span></p>
<p>where <span class="math inline">\(x_t\)</span> is the vector of independent variables (in our case, since we are estimating an AR(1) with intercept, this vector will contain the elements 1 and <span class="math inline">\(\Delta p_{t-1}\)</span>). <span class="math inline">\(y_t\)</span> is the dependent variable in <span class="math inline">\(t\)</span> (i.e.&nbsp;<span class="math inline">\(\Delta p_{t}\)</span>). <span class="math inline">\(R^h_t\)</span> is <span class="math inline">\(h\)</span>’s current estimate of the moment matrix of <span class="math inline">\(x\)</span>. <span class="math inline">\(n^h_t\)</span> is <span class="math inline">\(h\)</span>’s current estimate of the vector of parameters (intercept and AR parameter). <span class="math inline">\(\gamma^h\)</span> is the so-called gain parameter, which determines how sensitive <span class="math inline">\(h\)</span>’s estimates are to new observations.</p>
<p>Each household <span class="math inline">\(h\)</span> hence has an internal AR(1) model with the parameters contained in <span class="math inline">\(n^h_t\)</span>. Using the current electricity price, they can use this model to project the price forward, generating a time-series of expected future electricity prices which is used below to form an expected revenue from owning a solar panel.</p>
<p><span class="math inline">\(R^h_t\)</span> and <span class="math inline">\(n^h_t\)</span> are initialised uniformly across households and at the beginning of the simulation, the expectations formation algorithm is trained using the second time-series of electricity prices generated as a training dataset as described above. Note that if <span class="math inline">\(\gamma^h\)</span> differs across households, households will hold heterogeneous expectations.</p>
</section>
<section id="adoption-decision" class="level2">
<h2 class="anchored" data-anchor-id="adoption-decision">Adoption Decision</h2>
<p>The decision on whether or not to adopt PV is based on a simple utility maximization framework; every household which does not already own a solar panel makes this decision in every simulation period. By assumption, there exists only one type of solar panel in the model, such that the adoption decision is a binary one between adopting and not adopting. The solar panel has an installation cost <span class="math inline">\(K_t\)</span> which is uniform for every household and which changes over time (if we are simulating past years, empirical data on the cost of solar PV are used; for future years, these data are projected forward). As mentioned above, every solar panel generates a fixed amount of electricity <span class="math inline">\(G\)</span> per period.</p>
<p>Prior to deciding whether or not to purchase a solar panel based on utility considerations, every household which does not already own PV must check whether they are financially capable of adopting. If the accumulated liquidity of household <span class="math inline">\(h\)</span>, <span class="math inline">\(M^h_t\)</span> is greater than <span class="math inline">\(K_t\)</span>, <span class="math inline">\(h\)</span> can buy a panel outright and proceeds to the utility maximisation problem. If <span class="math inline">\(M^h_t&lt;K_t\)</span>, <span class="math inline">\(h\)</span> must obtain a loan of size <span class="math inline">\(L^h=K_t-M^h_t\)</span>.</p>
<p>By assumption, the bank in the model sets a maximum amount which it is prepared to lend to any given household <span class="math inline">\(h\)</span>, which is determined by <span class="math inline">\(LTV\cdot K_t\)</span> where <span class="math inline">\(LTV\leq1\)</span> (at present we are in fact working with <span class="math inline">\(LTV=1\)</span> so this constraint is not binding for any agent). If <span class="math inline">\(L^h&gt;LTV\cdot K_t\)</span>, the household cannot obtain a loan of sufficient size; they are credit-rationed and cannot adopt. The bank also checks whether the household is financially capable of meeting the payments on a loan of size <span class="math inline">\(L^h\)</span>. The interest rate which the bank would charge on a loan to <span class="math inline">\(h\)</span> is given by</p>
<p><span class="math display">\[
    r^h=r_t+\iota \frac{L^h}{LTV\cdot K_t}
\]</span></p>
<p>i.e.&nbsp;the interest rate charged by the bank increases with the loan to value ratio implied by the loan. <span class="math inline">\(r_t\)</span> is an exogenous base interest rate (if we are simulating past years, the average ECB base rate for that year is used; for future years, we take the currently effective rate and keep it constant in the baseline). Given that loans in the model are assumed to be amortising, and assuming that all loans in the model have a duration equal to the lifetime of a panel, <span class="math inline">\(A\)</span>, the per-period payment on a loan of size <span class="math inline">\(L^h\)</span> at rate <span class="math inline">\(r^h\)</span> would be</p>
<p><span class="math display">\[
    S^h=L^h\frac{r^h(1+r^h)^A}{(1+r^h)^A-1}
\]</span></p>
<p>If <span class="math inline">\(S^h\)</span> exceeds a fraction <span class="math inline">\(DTI\)</span> of the current income of <span class="math inline">\(h\)</span>, i.e.&nbsp;if <span class="math inline">\(\frac{S^h}{Y^h_t}&gt;DTI\)</span> the household is also credit-rationed and cannot adopt. Otherwise, they proceed to the utility maximisation problem.</p>
<p>Coming to the utility maximisation part of the adoption decision, we assume that</p>
<p><span class="math display">\[
    U^{h,PV=0}_{t}=0 \quad \forall\  h \in H \ \&amp; \ \forall\  t \in T
\]</span></p>
<p>i.e.&nbsp;the utility from not adopting PV is always zero for all households. This means that a household will adopt as soon as the utility from doing so is greater than zero (provided that they are not credit-constrained as described above). The utility from adopting is given by</p>
<p><span class="math display">\[
    U_{t}^{h, PV = 1} | (F^{h}=1) = E^h_t(\Pi^h)+\alpha^h \lambda^h_t+\beta Env^{h}\\
    U_{t}^{h, PV = 1} | (F^{h}=0) =0
\]</span></p>
<p>First of all, note that <span class="math inline">\(U_{t}^{h,PV = 1}\)</span> is conditional on <span class="math inline">\(F^{h}\)</span>. <span class="math inline">\(F^{h}\)</span> is a dummy denoting the feasibility of PV, i.e.&nbsp;whether, given the characteristics of the dwelling of household <span class="math inline">\(h\)</span>, a solar panel can in fact be installed (e.g.&nbsp;installation may not be technically feasible or there may be administrative rules preventing installation). If <span class="math inline">\(F^{h}=0\)</span>, PV cannot be installed and the utility, correspondingly, is zero. At present, <span class="math inline">\(F^h\)</span> is set for each household at the beginning of the simulation and remains fixed thereafter. If a household already owns PV at the beginning, it is set to 1. Otherwise it is set to 1 with probability 1 if the household lives in a house and with probability <span class="math inline">\(p^f&lt;1\)</span> if the household lives in a flat.</p>
<p>Focus now on the case of <span class="math inline">\(F^h=1\)</span>. Going from right to left, the term <span class="math inline">\(\beta Env^{h}\)</span> captures the environmental attitude of the household. <span class="math inline">\(Env^h\)</span> is a fixed household characteristic which takes 4 discrete levels (higher value=more concerned about the environment/climate change, the lowest value being 0), calibrated on Gallup survey data from the US. <span class="math inline">\(\beta Env^{h}\)</span> is supposed to reflect the intrinsic utility which <span class="math inline">\(h\)</span> derives from owning PV regardless of whether or not it is profitable to do so.</p>
<p><span class="math inline">\(\alpha^h \lambda^h_{t}\)</span> captures the element of social influence/emulation, where</p>
<p><span class="math display">\[
    \lambda^h_{t}=\omega^{PV=1}_{d=d^h, t-1}-\omega^{PV=0}_{d=d^h, t-1}
\]</span></p>
<p><span class="math inline">\(\omega^{PV=1}_{d=d^h, t-1}\)</span> is the share of households in the same income decile as <span class="math inline">\(h\)</span> who owned PV at the end of the previous period, with <span class="math inline">\(\omega^{PV=0}_{d=d^h, t-1}\)</span> being the corresponding share of households in the same decile who own PV. <span class="math inline">\(\lambda^h_{t}\)</span> hence takes a value between <span class="math inline">\(-1\)</span> and <span class="math inline">\(1\)</span>.</p>
<p>Finally, the term <span class="math inline">\(E^h_{t}(\Pi^h)\)</span> denotes <span class="math inline">\(h\)</span>’s expectation at time <span class="math inline">\(t\)</span> of the cumulative profit, <span class="math inline">\(\Pi^h\)</span> which <span class="math inline">\(h\)</span> will be able to derive from owning PV over the lifetime of a panel. This expected profit is given by:</p>
<p><span class="math display">\[
    E^h_{t}(\Pi^h)=\sum_{a = 1}^{A}(\rho^h)^a E^h_{t}(Rev^h_{t+a})-K_t-I^h
\]</span></p>
<p><span class="math inline">\(\sum_{a = 1}^{A}E^h_{t}(Rev^h_{t+a})\)</span> is the sum of future revenue/electricity cost saving which the household expects a solar panel to generate over its lifetime of <span class="math inline">\(A\)</span> periods. Recall from above that in any period <span class="math inline">\(t\)</span>, the revenue/cost saving which an existing solar panel generates depends on the electricity price, the feed-in tariff received by the owner, as well as the electricity consumption of the household. In the same way, the <em>expected</em> revenue/cost saving generated by a panel in some future period <span class="math inline">\(t+a\)</span> depends on:</p>
<div class="incremental">
<ul class="incremental">
<li>The feed-in tariff which the household would receive if it buys a panel in <span class="math inline">\(t\)</span></li>
<li>The electricity price which the household expects to prevail in <span class="math inline">\(t+a\)</span></li>
<li>The (expected) electricity consumption of <span class="math inline">\(h\)</span> in <span class="math inline">\(t+a\)</span></li>
</ul>
</div>
<p>The feed-in tariff the agent will receive if it adopts PV in <span class="math inline">\(t\)</span> is known. The expected price in <span class="math inline">\(t+a\)</span> is given by the expectation formation mechanism described above. Regarding electricity consumption, recall that <span class="math inline">\(\overline{E^h_t}\)</span> is assumed to grow at a fixed rate <span class="math inline">\(g^h\)</span> in every period; we assume that the household knows this, meaning that it can easily calculate its electricity consumption in <span class="math inline">\(t+a\)</span>. With these elements in place, the expected future revenue/cost saving for the next <span class="math inline">\(A\)</span> periods can be calculated in the same way as <em>current</em> revenue/cost saving, described above (i.e.&nbsp;also checking whether the feed-in tariff is larger or smaller than the expected electricity price etc.). Expected revenue/cost saving in future periods is discounted by the individual discount rate of <span class="math inline">\(h\)</span>, <span class="math inline">\(\rho^h\)</span>. The distribution of discount rates across agents is calibrated based on the existing literature on discount rate elicitation.</p>
<p><span class="math inline">\(K_t\)</span> is the installation cost of the panel, which is the same for every household.</p>
<p><span class="math inline">\(I^h\)</span>, finally, is the financing cost of the panel. If no loan is needed, the loan cost is obviously 0. If a loan is needed, the cost is equal to the discounted sum of interest payments which will have to be made over the entire term of the loan. As set out above, the interest rate on the loan is given by</p>
<p><span class="math display">\[
    r^h=r_t+\iota \frac{L^h}{LTV\cdot K_t}
\]</span></p>
<p>from which we can calculate a per-period loan payment as</p>
<p><span class="math display">\[
    S^h=L^h\frac{r^h(1+r^h)^A}{(1+r^h)^A-1}
\]</span></p>
<p>Knowing the principal and per-period payment, we can calculate an amortisation schedule telling us how much principal and interest the household will have to pay in each future period, which in turn allows us to derive the loan cost as the discounted sum of future interest payments (note that principal payments are not a cost as they do not affect net worth, therefore they should not enter into the calculation of profit!).</p>
<p>Since loans are not costless, it is possible that even if the discounted expected revenue from owning a panel exceeds the installation cost, overall expected profit may turn negative due to the implied financing cost.</p>
<p>In order to somewhat constrain the model dynamics (in particular to avoid the phenomenon of many agents who already owned a solar panel previously not buying a new one once the old one is scrapped, which can occur for some parameter settings), we make one further assumption:</p>
<p>If a household already owned PV in the past but is now no longer an owner because the panel reached its maximum age, then if that panel generated a positive cumulative profit over its lifespan (i.e.&nbsp;<span class="math inline">\(\Pi^h&gt;0\)</span>), we set both <span class="math inline">\(Env^{h}\)</span> and <span class="math inline">\(\alpha^h\)</span> to 0 for that household. This means that in considering whether to re-adopt PV, such a household will only consider the expected future profit. All other households sum up all three elements of utility (expected profit, social influence/emulation and environmental attitude).</p>
<p>All households for whom utility is positive, who do not already own a panel and who are not credit-rationed will adopt PV. Any loans taken out to do so are added to their balance sheets, their liquidity is updated, interest rates and loan payments are set (if applicable) and the PV dummies is set to 1. <span class="math inline">\(FIT^h_t\)</span> is set to the feed-in tariff currently in force for all households adopting in <span class="math inline">\(t\)</span> and remains unchanged over the lifetime of the panel.</p>
<p>Since we are also keeping track of the <em>actual</em> cumulative profit <span class="math inline">\(\Pi^h\)</span> (not discounted) which a household derives from owning PV, the cumulative profit of all agents adopting PV in <span class="math inline">\(t\)</span> is initialised to <span class="math inline">\(\Pi^h=-K_t\)</span>.</p>
</section>
<section id="policy" class="level2">
<h2 class="anchored" data-anchor-id="policy">Policy</h2>
<p>At present, the model allows for 4 types of policy experiments:</p>
<div class="incremental">
<ul class="incremental">
<li>A subsidy on the purchase price of a panel, reducing <span class="math inline">\(K_t\)</span> by some percentage</li>
<li>An addition to the feed-in tariff on top of the historical values fed exogenously into the model</li>
<li>A relaxation of the maximum loan to value constraint (currently not relevant since we already set <span class="math inline">\(LTV=1\)</span>)</li>
<li>A relaxation of the maximum debt-service to income constraint</li>
</ul>
</div>
<p>In addition, different scenarios/experiments can be simulated by altering the time-series which are fed into the model exogenously (e.g.&nbsp;electricity price time-series, base interest rate, price of PV etc.). Finally, it is easily feasible to switch from the current expectation formation mechanism for the electricity price to a perfect foresight setting as the electricity price is completely independent from endogenous model dynamics.</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Note that this is distinct from the price which any household may expect to prevail in the future; described below.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>