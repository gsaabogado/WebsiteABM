<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The ABM Model of Technology Adoption (ABM-REN) - Model Overview</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">The ABM Model of Technology Adoption (ABM-REN)</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./01_about.html" aria-current="page">Home</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/gsaabogado"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/gsaabogado"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://luissarmiento.net/">Personal Site</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Model Overview</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Sections</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_about.html" class="sidebar-item-text sidebar-link">About</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_data.html" class="sidebar-item-text sidebar-link">Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_theory.html" class="sidebar-item-text sidebar-link">Theoretical Background</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_model.html" class="sidebar-item-text sidebar-link active">Model Overview</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_code.html" class="sidebar-item-text sidebar-link">Model Code</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#defining-the-model-parameters" id="toc-defining-the-model-parameters" class="nav-link active" data-scroll-target="#defining-the-model-parameters">Defining the model parameters</a>
  <ul class="collapse">
  <li><a href="#household-state-variables-and-characteristics" id="toc-household-state-variables-and-characteristics" class="nav-link" data-scroll-target="#household-state-variables-and-characteristics">Household state variables and characteristics</a></li>
  <li><a href="#household-parameters" id="toc-household-parameters" class="nav-link" data-scroll-target="#household-parameters">Household parameters</a></li>
  <li><a href="#model-parameters" id="toc-model-parameters" class="nav-link" data-scroll-target="#model-parameters">Model parameters</a></li>
  <li><a href="#model-wide-state-variables" id="toc-model-wide-state-variables" class="nav-link" data-scroll-target="#model-wide-state-variables">Model-wide state variables</a></li>
  </ul></li>
  <li><a href="#estimating-the-electricity-price" id="toc-estimating-the-electricity-price" class="nav-link" data-scroll-target="#estimating-the-electricity-price">Estimating the electricity price</a></li>
  <li><a href="#income-and-electricity-costs" id="toc-income-and-electricity-costs" class="nav-link" data-scroll-target="#income-and-electricity-costs">Income and electricity costs</a></li>
  <li><a href="#consumption" id="toc-consumption" class="nav-link" data-scroll-target="#consumption">Consumption</a></li>
  <li><a href="#updating-the-panels-age" id="toc-updating-the-panels-age" class="nav-link" data-scroll-target="#updating-the-panels-age">Updating the panel’s age</a></li>
  <li><a href="#electricity-price-expectations" id="toc-electricity-price-expectations" class="nav-link" data-scroll-target="#electricity-price-expectations">Electricity price expectations</a></li>
  <li><a href="#adoption-decision" id="toc-adoption-decision" class="nav-link" data-scroll-target="#adoption-decision">Adoption Decision</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Model Overview</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="defining-the-model-parameters" class="level2">
<h2 class="anchored" data-anchor-id="defining-the-model-parameters">Defining the model parameters</h2>
<p>The model consists of a set of <span class="math inline">\(N\)</span> households. Households’ initial characteristics are set using SOEP data alongside other data sources. Parameter values are set following empirical evidence as far as possible.</p>
<section id="household-state-variables-and-characteristics" class="level3">
<h3 class="anchored" data-anchor-id="household-state-variables-and-characteristics">Household state variables and characteristics</h3>
<div class="incremental">
<ul class="incremental">
<li><span class="math inline">\(h\)</span> - Household identifier</li>
<li><span class="math inline">\(t\)</span> - Year identifier</li>
<li><span class="math inline">\(Y^h_t\)</span> - Income for household <span class="math inline">\(h\)</span> at year <span class="math inline">\(t\)</span></li>
<li><span class="math inline">\(C^h_t\)</span> - Consumption expenditure</li>
<li><span class="math inline">\(E^h_t\)</span> - Electricity consumption (in kWh)</li>
<li><span class="math inline">\(M^h_t\)</span> - Liquidity (i.e.&nbsp;the stock of accumulated wealth held in the form of liquid assets/money)</li>
<li><span class="math inline">\(D^h_t\)</span> - Debt</li>
<li><span class="math inline">\(S^h_t\)</span> - Debt service (consisting of interest (household-specific rate) &amp; principal payments)</li>
<li><span class="math inline">\(\theta^h_t\)</span> - Share of saving which goes into liquid assets (calculated using Bundesbank data)</li>
<li><span class="math inline">\(H_1^h\)</span> - Housing type (dummy; house or flat; fixed; taken from SOEP)</li>
<li><span class="math inline">\(H_2^h\)</span> - Home ownership (dummy; own or rent; fixed; taken from SOEP)</li>
<li><span class="math inline">\(F_h\)</span> - PV feasibility (dummy; can PV be installed on dwelling in principle?; fixed)</li>
<li><span class="math inline">\(PV^h_t\)</span> - PV ownership (dummy; initialised from SOEP)</li>
<li><span class="math inline">\(Age of panel\)</span> (initialised from SOEP)</li>
<li><span class="math inline">\(Env_h\)</span> - Environmental attitude (heterogeneous but fixed for now, will be set using SOEP data)</li>
<li><span class="math inline">\(Expectation model\)</span> (estimated individually by each household using past electricity prices)</li>
<li><span class="math inline">\(p^{e,h}\)</span> - Time-series of future expected electricity prices</li>
</ul>
</div>
</section>
<section id="household-parameters" class="level3">
<h3 class="anchored" data-anchor-id="household-parameters">Household parameters</h3>
<div class="incremental">
<ul class="incremental">
<li><span class="math inline">\(\alpha_h\)</span> - Weight of social influence in utility (heterogeneous, set freely)</li>
<li><span class="math inline">\(\beta\)</span> - Weight of environmental attitude in utility (uniform, set freely)</li>
<li><span class="math inline">\(\gamma_h\)</span> - Gain parameter used in updating the electricity price expectation model (heterogeneous, set freely)</li>
<li><span class="math inline">\(\rho_h\)</span> - Discount rate (heterogeneous, set freely)</li>
<li><span class="math inline">\(\mu\)</span> - Adjustment speed of consumption expenditure (uniform, set freely)</li>
<li><span class="math inline">\(g_h\)</span> - Trend growth rate of household income and electricity consumption (set freely and uniformly)</li>
</ul>
</div>
</section>
<section id="model-parameters" class="level3">
<h3 class="anchored" data-anchor-id="model-parameters">Model parameters</h3>
<div class="incremental">
<ul class="incremental">
<li><span class="math inline">\(K\)</span> - Installation cost of PV (roughly calibrated based on online sources)</li>
<li><span class="math inline">\(G\)</span> - Capacity of a solar panel (in kWh; roughly calibrated based on online sources)</li>
<li><span class="math inline">\(A\)</span> - Lifespan of a panel (in years; roughly calibrated based on online sources)</li>
<li><span class="math inline">\(r\)</span> - Base interest rate (set freely)</li>
<li><span class="math inline">\(\iota\)</span> - Interest rate markup parameter (set freely)</li>
<li><span class="math inline">\(LTV\)</span> - Maximum permissible loan to value ratio (set freely)</li>
<li><span class="math inline">\(DTI\)</span> - Maximum permissible loan payment to income ratio (set freely)</li>
<li><span class="math inline">\(p^f_1\)</span> - Probability that PV is feasible on a house (set freely)</li>
<li><span class="math inline">\(p^f_2\)</span> - Probability that PV is feasible on a flat (set freely)</li>
</ul>
</div>
</section>
<section id="model-wide-state-variables" class="level3">
<h3 class="anchored" data-anchor-id="model-wide-state-variables">Model-wide state variables</h3>
<div class="incremental">
<ul class="incremental">
<li><span class="math inline">\(Electricity price model\)</span> - a pre-defined AR(1) model which generates the electricity price in each period)</li>
</ul>
</div>
<p>The <strong>sequence of events</strong> taking place in every simulation period only consists of a few steps:</p>
<div class="incremental">
<ul class="incremental">
<li>Set current electricity price</li>
<li>Determine income and electricity cost for each household; Update income distribution statistics</li>
<li>Based on new income distribution determine consumption expenditure. Calculate saving, apply debt service for each household with positive debt and update liquidity</li>
<li>Augment the age of existing solar panels; scrap those which exceed the maximum lifespan</li>
<li>Update households’ expectations of future electricity price</li>
<li>Consider adopting PV if not adopted yet</li>
</ul>
</div>
</section>
</section>
<section id="estimating-the-electricity-price" class="level2">
<h2 class="anchored" data-anchor-id="estimating-the-electricity-price">Estimating the electricity price</h2>
<p>We simulate the current electricity price in period <span class="math inline">\(t\)</span> using an AR(1) model estimated on a time-series of household-level electricity prices for Germany taken from Eurostat.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> This time-series is differenced and then used to estimate the intercept (<span class="math inline">\(\phi_1\)</span>) and autoregressive (<span class="math inline">\(\phi_2\)</span>) parameter, with the residuals used to calculate the standard deviation of random shocks (<span class="math inline">\(\sigma^p\)</span>). This estimated model is then simulated in each period in order to determine the current electricity price; accordingly, the electricity price in the model in <span class="math inline">\(t\)</span> is given by:</p>
<p><span class="math display">\[
    p_t=p_{t-1}+\phi_1+\phi_2 \Delta p_{t-1}+\epsilon^p_t \rightarrow \epsilon^p_t\sim\mathcal{N}(0,\sigma^p)
\]</span></p>
</section>
<section id="income-and-electricity-costs" class="level2">
<h2 class="anchored" data-anchor-id="income-and-electricity-costs">Income and electricity costs</h2>
<p>In every simulation period, we simulate the income of household <span class="math inline">\(h=1,...,N\)</span> using a draw from the normally distributed <span class="math inline">\(Y^h_t\)</span> with mean <span class="math inline">\(\overline{Y^h_t}\)</span> and standard deviation <span class="math inline">\(\widehat{Y^h_t}\)</span>.</p>
<p><span class="math display">\[
    Y^h_t\sim \mathcal{N}\left(\overline{Y^h_t},\widehat{Y^h_t}\right)
\]</span></p>
<p>The mean, <span class="math inline">\(\overline{Y^h_t}\)</span>, is initialised using the income of <span class="math inline">\(h\)</span> according to the 2018 SOEP wave and grows at rate <span class="math inline">\(g_h\)</span> in every period thereafter. <span class="math inline">\(\widehat{Y^h_t}\)</span> is given by <span class="math inline">\(\overline{Y^h_t}\cdot\sigma^y_d\)</span> where <span class="math inline">\(\sigma^y_d\)</span> is the standard deviation of income within the income decile <span class="math inline">\(d\)</span> of household <span class="math inline">\(h\)</span> in the 2018 SOEP wave (expressed as % of average income in that decile)</p>
<p>The electricity consumption of each household (in kWh) is also a random variable, drawn from a normal distribution in each period:</p>
<p><span class="math display">\[
    E^h_t\sim \mathcal{N}\left(\overline{E^h_t},\widehat{E^h_t}\right)
\]</span></p>
<p>As with income <span class="math inline">\(\overline{E^h_t}\)</span> is initialised using the electricity consumption of <span class="math inline">\(h\)</span> taken from the 2018 SOEP wave (deflated by the 2018 electricity price from the Eurostat dataset) and grows at rate <span class="math inline">\(g_h\)</span> in every period thereafter. <span class="math inline">\(\widehat{E^h_t}\)</span> is given by <span class="math inline">\(\overline{E^h_t}\cdot\sigma^e_d\)</span> where <span class="math inline">\(\sigma^e_d\)</span> is the standard deviation of electricity consumption within the income decile <span class="math inline">\(d\)</span> of household <span class="math inline">\(h\)</span> in the 2018 SOEP wave (expressed as % of average electricity consumption in that decile).</p>
<p>The cost of electricity to be paid by <span class="math inline">\(h\)</span> is then given by</p>
<p><span class="math display">\[
    p_t(E^h_t-PV^h_t G)
\]</span></p>
<p>where the dummy <span class="math inline">\(PV^h_t\)</span> denotes whether or not <span class="math inline">\(h\)</span> owns a solar panel and <span class="math inline">\(G\)</span> is the (uniform) capacity of that panel. Note that if <span class="math inline">\(E^h_t&lt;PV^h_t G\)</span> electricity cost is negative. The household produces more electricity than it consumes and, by assumption, can sell the surplus to the grid at price <span class="math inline">\(p_t\)</span>, generating additional income. To take this into account, we calculate an ex-post value of income as</p>
<p><span class="math display">\[
    Y^{p,h}_t=Y^h_t-min\left(0,p_t\left(E^h_t-PV^h_t G\right)\right)
\]</span></p>
<p>We then calculate income distribution statistics (percentiles and deciles, used below) for period <span class="math inline">\(t\)</span> using this ex-post income.</p>
</section>
<section id="consumption" class="level2">
<h2 class="anchored" data-anchor-id="consumption">Consumption</h2>
<p>Each household devotes a part its income to consumption expenditures (excluding electricity consumption which is determined as described above). The average propensity to consume of <span class="math inline">\(h\)</span>, <span class="math inline">\(c^h_t\)</span>, is determined using survey data from the German Federal Statistical Office, which gives household consumption expenditure by income group, converted into percentiles using the 2018 SOEP wave. <span class="math inline">\(c^h_t\)</span> is hence the average propensity to consume of the income percentile in which <span class="math inline">\(h\)</span> finds itself in period <span class="math inline">\(t\)</span>. The desired consumption expenditure of <span class="math inline">\(h\)</span> is then given by</p>
<p><span class="math display">\[
    C^h_t=(1-\mu)C^h_{t-1}+\mu c^h_t Y^{p,h}_t
\]</span></p>
<p>where <span class="math inline">\(\mu\)</span> is a parameter giving the speed at which consumption expenditure adjusts. In the initial period, we set <span class="math inline">\(C^h_t=c^h_t Y^{p,h}_t\)</span>.</p>
<p>Each household in the model holds a stock of liquid assets (money) which is augmented by income and can be used to consume, pay for electricity, and service debt. To update the liquidity of <span class="math inline">\(h\)</span>, we first calculate the difference between income on the one hand and desired consumption expenditure and electricity consumption on the other:</p>
<p><span class="math display">\[
    Save^h_t=Y^h_t-C^h_t-p_t(E^h_t-PV^h_t G)
\]</span></p>
<p>Recall that if <span class="math inline">\(PV^h_t=1\)</span> and <span class="math inline">\(E^h_t&lt;G\)</span>, the household generates more electricity using PV than it actually consumes, and it sells the excess to the grid at the current electricity price, <span class="math inline">\(p_t\)</span>.</p>
<p>In the first instance, <span class="math inline">\(Save^h_t\)</span> is added to existing liquidity. Note that we assume that households cannot hold negative liquidity; if saving is negative and larger than previously accumulated liquidity, liquidity is set to 0 (implicitly assuming that the household reduces desired consumption expenditure and/or expenditure on electricity in order to be able to afford the payments):</p>
<p><span class="math display">\[
    M^h_t=max\left(0,M^h_{t-1}+Save^h_t\right)
\]</span></p>
<p>In the model, households may incur debt in order to purchase a solar panel. At the beginning of the simulation, the debt of all households (including those already owning PV) is initialised to 0. In any period <span class="math inline">\(t&gt;0\)</span>, households which in the past used a loan in order to buy PV and have not yet fully paid it off must make a debt service payment consisting of interest and principal payments, denoted by <span class="math inline">\(S^h\)</span>. <span class="math inline">\(S^h\)</span> is determined when a household takes out a loan in order to adopt PV. Its calculation is explained in the description of the adoption decision below.</p>
<p>Payments for debt service are made out of the stock of liquidity updated above:</p>
<p><span class="math display">\[
    M^h_t=max\left(0,M^h_t-S^h_t\right)
\]</span></p>
<p>Note that here, too, we assume that payments cannot lead to negative liquidity! If a household is unable to (fully) make its debt service payment out of liquidity, it pays as much as it can, making first the interest payment and then the principal payment. Unpaid principal payments mean that the stock of debt does not decrease as much as it would if the payment were made in full. Any unpaid <em>interest</em> payments are <em>added</em> to the household’s outstanding debt. In both of these cases, <span class="math inline">\(S^h\)</span>, i.e.&nbsp;the per-period debt service to be paid in the future is re-calculated taking into account unpaid principal and/or interest payments and the remaining term of the loan.</p>
<p>In a final step, we include a saving allocation choice. This is done to make sure that average household liquidity does not grow too fast. In particular we assume that</p>
<p><span class="math display">\[
    M^h_t=M^h_{t-1}+\theta^h_t(M^h_t-M^h_{t-1}) \quad if\ M^h_t&gt;M^h_{t-1}
\]</span></p>
<p>i.e.&nbsp;we assume that if the household has positive saving, it puts only part of this into liquid assets (bank deposits etc.). <span class="math inline">\(\theta^h_t\)</span> is set using Bundesbank data from which we calculate the share of liquid assets in median gross wealth by income group, such that <span class="math inline">\(\theta^h_t\)</span> is the corresponding share for the income percentile in which <span class="math inline">\(h\)</span> finds itself in period <span class="math inline">\(t\)</span>.</p>
<p>The Initial value for liquidity is also set using these data, using median gross wealth and the share of liquid assets for the income group in which <span class="math inline">\(h\)</span> starts out.</p>
</section>
<section id="updating-the-panels-age" class="level2">
<h2 class="anchored" data-anchor-id="updating-the-panels-age">Updating the panel’s age</h2>
<p>The model assumes that solar panels have a uniform maximum lifespan, and the age of each panel in the model is augmented by 1 in each period. The age of panels already existing at the beginning of the simulation is taken from SOEP data. If a panel owned by a household <span class="math inline">\(h\)</span> reaches the maximum lifespan in <span class="math inline">\(t\)</span>, the panel is scrapped and the state variable <span class="math inline">\(PV^h_t\)</span> is set to 0. The household can then (see below) decide whether they wish to buy a new panel.</p>
</section>
<section id="electricity-price-expectations" class="level2">
<h2 class="anchored" data-anchor-id="electricity-price-expectations">Electricity price expectations</h2>
<p>In order to form an expectation about whether purchasing a solar panel is a profitable undertaking, households must have an expectation of the future electricity price over the lifespan of the panel. In line with a large literature on alternatives to the rational expectations hypothesis, it is assumed that each household uses <em>recursive least squares learning</em> in order to estimate an econometric model of the electricity price using past observations, which is then projected forward to generate a time-series of expected future electricity prices.</p>
<p>In particular, we assume that agents know that changes in the electricity price follow an AR(1) model, but they do not know the parameters of this model. They attempt to learn them using the recursive least squares formula with constant gain:</p>
<p><span class="math display">\[
R^h_t =R^h_{t-1}+\gamma_h\left(x_t x_t'-R^h_{t-1}\right) n^h_t =n^h_{t-1}+\gamma_h\left(R^h_t\right)^{-1}x_t(y_t-x_t' n^h_{t-1})
\]</span></p>
<p>where <span class="math inline">\(x_t\)</span> is the vector of independent variables (in our case, since we are estimating an AR(1) with intercept, this vector will contain the elements 1 and <span class="math inline">\(\Delta p_{t-1}\)</span>). <span class="math inline">\(y_t\)</span> is the dependent variable in <span class="math inline">\(t\)</span> (i.e.&nbsp;<span class="math inline">\(\Delta p_{t}\)</span>). <span class="math inline">\(R^h_t\)</span> is <span class="math inline">\(h\)</span>’s current estimate of the moment matrix of <span class="math inline">\(x\)</span>. <span class="math inline">\(n^h_t\)</span> is <span class="math inline">\(h\)</span>’s current estimate of the vector of parameters (intercept and AR parameter). <span class="math inline">\(\gamma_h\)</span> is the so-called gain parameter, which determines how sensitive <span class="math inline">\(h\)</span>’s estimates are to new observations.</p>
<p>Each household <span class="math inline">\(h\)</span> hence has an internal AR(1) model with the parameters contained in <span class="math inline">\(n^h_t\)</span>. Using the current electricity price, they can use this model to project the price forward, generating a time-series of expected future electricity prices which is used below to form an expected revenue from owning a solar panel.</p>
<p><span class="math inline">\(R^h_t\)</span> and <span class="math inline">\(n^h_t\)</span> are initialised uniformly across households and close to their true values. However, the fact that <span class="math inline">\(\gamma_h\)</span> differs across households implies that households update their expectations differently.</p>
</section>
<section id="adoption-decision" class="level2">
<h2 class="anchored" data-anchor-id="adoption-decision">Adoption Decision</h2>
<p>The decision on whether or not to adopt PV is based on a simple utility maximization framework; every household which does not already own a solar panel makes this decision in every simulation period. By assumption, there exists only one type of solar panel in the model, which has a fixed, uniform installation cost for every household and which generates a fixed, uniform amount of electricity (in kWh) in every period in which it is installed. The adoption decision is hence a binary one between adopting and not adopting.</p>
<p>Prior to deciding whether or not to purchase a solar panel based on utility considerations, however, every household which does not already own PV must check whether they are financially capable of adopting. The uniform installation cost of a panel is given by <span class="math inline">\(K\)</span>. If the accumulated liquidity of household <span class="math inline">\(h\)</span>, <span class="math inline">\(M^h_t\)</span> is greater than <span class="math inline">\(K\)</span>, <span class="math inline">\(h\)</span> can buy a panel outright and proceeds to the utility maximisation problem. If <span class="math inline">\(M^h_t&lt;K\)</span>, <span class="math inline">\(h\)</span> must obtain a loan of size <span class="math inline">\(L^h=K-M^h_t\)</span>.</p>
<p>By assumption, the bank in the model sets a maximum amount which it is prepared to lend to any given household <span class="math inline">\(h\)</span>, which is determined by <span class="math inline">\(LTV\cdot K\)</span> where <span class="math inline">\(LTV&lt;1\)</span> i.e.&nbsp;it is a fraction of the cost of the panel. If <span class="math inline">\(L^h&gt;LTV\cdot K\)</span>, the household cannot obtain a loan of sufficient size; they are credit-rationed and cannot adopt. If they pass the first check, the bank also checks whether the household is financially capable of meeting the payments on a loan of size <span class="math inline">\(L^h\)</span>. The interest rate which the bank would charge on a loan to <span class="math inline">\(h\)</span> is given by</p>
<p><span class="math display">\[
    r_h=r+\iota \frac{L^h}{LTV\cdot K}
\]</span></p>
<p>i.e.&nbsp;the interest rate charged by the bank increases with the loan to value ratio implied by the loan. Given that loans in the model are assumed to be amortising, and assuming that all loans in the model have a duration equal to the lifetime of a panel, <span class="math inline">\(A\)</span>, the per-period payment on a loan of size <span class="math inline">\(L^h\)</span> at rate <span class="math inline">\(r_h\)</span> would be</p>
<p><span class="math display">\[
    S^h=L^h\frac{r_h(1+r_h)^A}{(1+r_h)^A-1}
\]</span></p>
<p>If <span class="math inline">\(S_h\)</span> exceeds a fraction <span class="math inline">\(DTI\)</span> of the current income of <span class="math inline">\(h\)</span>, i.e.&nbsp;if <span class="math inline">\(\frac{S^h}{Y^h_t}&gt;DTI\)</span> the household is also credit-rationed and cannot adopt. Otherwise, they proceed to the utility maximisation problem.</p>
<p>Coming to the utility maximisation part of the adoption decision, we assume that</p>
<p><span class="math display">\[
    U^{PV=0}_{h,t}=0 \quad \forall\  h \in H \ \&amp; \ \forall\  t \in T
\]</span></p>
<p>i.e.&nbsp;the utility from not adopting PV is always zero for all households. This means that a household will adopt as soon as the utility from doing so is greater than zero (provided that they are not credit-constrained as described above). The utility from adopting is given by</p>
<p><span class="math display">\[
    U_{h,t}^{PV = 1} | (F_{h}=1) = E_{h,t}(\Pi_h)+\alpha_h \lambda_{h,t}+\beta Env_{h} ---
    U_{h,t}^{PV = 1} | (F_{h}=0) =0
\]</span></p>
<p>First of all, note that <span class="math inline">\(U_{h,t}^{PV = 1}\)</span> is conditional on <span class="math inline">\(F_{h}\)</span>. <span class="math inline">\(F_{h}\)</span> is a dummy denoting the feasibility of PV, i.e.&nbsp;whether, given the characteristics of the dwelling of household <span class="math inline">\(h\)</span>, a solar panel can in fact be installed. If <span class="math inline">\(F_{h}=0\)</span>, PV cannot be installed and the utility, correspondingly, is zero. At present, <span class="math inline">\(F_h\)</span> is set for each household at the beginning of the simulation and remains fixed thereafter. If a household already owns PV at the beginning, it is set to 1. Otherwise it is set to 1 with probability <span class="math inline">\(p^f_1\)</span> if the household lives in a house and with probability <span class="math inline">\(p^f_2&lt;p^f_1\)</span> if the household lives in a flat.</p>
<p>Focus now on the case of <span class="math inline">\(F_h=1\)</span>. Going from right to left, the term <span class="math inline">\(\beta Env_{h}\)</span> captures the environmental attitude of the household. <span class="math inline">\(Env_h\)</span> is a random number drawn from <span class="math inline">\(\mathcal{U}(0,1)\)</span> for each household at the beginning of the simulation, which remains fixed thereafter. It is supposed to reflect the intrinsic utility which <span class="math inline">\(h\)</span> derives from owning PV regardless of whether or not it is profitable to do so.</p>
<p><span class="math inline">\(\alpha_h \lambda_{h,t}\)</span> captures the element of social influence/emulation, where</p>
<p><span class="math display">\[
    \lambda_{h,t}=\omega^{PV=1}_{d=d_h, t-1}-\omega^{PV=0}_{d=d_h, t-1}
\]</span></p>
<p><span class="math inline">\(\omega^{PV=1}_{d=d_h, t-1}\)</span> is the share of households in the same income decile as <span class="math inline">\(h\)</span> who owned PV at the end of the previous period, with <span class="math inline">\(\omega^{PV=0}_{d=d_h, t-1}\)</span> being the share of households in the same decile who own PV. <span class="math inline">\(\lambda_{h,t}\)</span> hence takes a value between <span class="math inline">\(-1\)</span> and <span class="math inline">\(1\)</span>.</p>
<p>Finally, the term <span class="math inline">\(E_{h,t}(\Pi_h)\)</span> denotes <span class="math inline">\(h\)</span>’s expectation at time <span class="math inline">\(t\)</span> of the profit, <span class="math inline">\(\Pi_h\)</span> which <span class="math inline">\(h\)</span> will be able to derive from owning PV over the lifetime of a panel. This expected profit is given by:</p>
<p><span class="math display">\[
    E_{h,t}(\Pi_h)=\sum_{a = 1}^{A}\rho_h^a E_{h,t}(p_{t+a})G-K-I^h
\]</span></p>
<p><span class="math inline">\(\sum_{a = 1}^{A}E_{h,t}(p_{t+a})G\)</span> is the expected revenue generated by the panel, obtained by multiplying the expected electricity price in every future period from <span class="math inline">\(t+1\)</span> to <span class="math inline">\(t+A\)</span> by the fixed capacity of the panel and taking the sum. This expected revenue is discounted by the individual discount rate of <span class="math inline">\(h\)</span>, <span class="math inline">\(\rho_h\)</span>. Recall that, by assumption, households can buy and sell electricity from/to the grid at the same price. It hence makes no difference whether <span class="math inline">\(G\)</span> is greater or smaller than the actual average electricity consumption of <span class="math inline">\(h\)</span>; if the panel will generate excess electricity, <span class="math inline">\(h\)</span> expects to be able to sell this to the grid at the expected price.</p>
<p><span class="math inline">\(K\)</span> is the fixed installation cost of the panel, which is the same for every household.</p>
<p><span class="math inline">\(I^h\)</span>, finally, is the financing cost of the panel. If no loan is needed (first case above), the loan cost is obviously 0. If a loan is needed, the cost is equal to the discounted sum of interest payments which will have to be made over the entire term of the loan. As set out above, the interest rate on the loan is given by</p>
<p><span class="math display">\[
    r_h=r+\iota \frac{L^h}{LTV\cdot K}
\]</span></p>
<p>from which we can calculate a per-period loan payment as</p>
<p><span class="math display">\[
    S^h=L^h\frac{r_h(1+r_h)^A}{(1+r_h)^A-1}
\]</span></p>
<p>Knowing the principal and per-period payment, we can calculate an amortisation schedule telling us how much principal and interest the household will have to pay in each future period, which in turn allows us to derive the loan cost as the discounted sum of future interest payments (note that principal payments are not a cost as they do not affect net worth!).</p>
<p>Since loans are not costless, it is possible that even if the discounted expected revenue from owning a panel exceeds the installation cost, overall expected profit may turn negative due to the implied financing cost!</p>
<p>The household sums up all three elements of utility (expected profit, social influence, environmental attitude) and if that sum is positive, it adopts PV. Any loan taken out to do so is added to their balance sheet.</p>


</section>


<div id="quarto-appendix" class="default"><section class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1" role="doc-endnote"><p>Note that this is distinct from the price which any household may expect to prevail in the future; described below.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>